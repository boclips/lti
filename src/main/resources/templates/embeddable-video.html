<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Boclips</title>

    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" href="/styles/normalize.css" />
    <link rel="stylesheet" href="/styles/fonts.css" />

    <script
      src="https://unpkg.com/boclips-player/dist/boclips-player.js"
      type="text/javascript"
    ></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/boclips-player/dist/boclips-player.css"
      type="text/css"
    />
  </head>
  <body style="margin: 0 0;">
    <div id="container"></div>

    <script th:inline="javascript">
      /*<![CDATA[*/
      var videoUrl = [[${video.playbackUrl}]];
      var userId = [[${userId}]];
      var playerAuthUrl = [[${video.playerAuthUrl}]] ;
      var container = document.querySelector("#container");
      var player = Boclips.PlayerFactory.get(container, {
        api: {
          tokenFactory: function () {
            return fetch("https://api.staging-boclips.com/videos/v1").then(
              function (response) {
                return response.text();
              }
            );
          },
          userIdFactory: userId ? () => Promise.resolve(userId) : undefined,
        },
      });
      player.loadVideo("https://api.staging-boclips.com/videos/v1/123");
      /*]]>*/
    </script>
  </body>
</html>
